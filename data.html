<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Data BWA WiBAS</title>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; background: #f4f6f8; }
    header, footer { background: #0f172a; color: #fff; padding: 20px; }
    nav { background: #1e293b; padding: 10px 20px; }
    nav a { color: #fff; margin-right: 15px; text-decoration: none; font-weight: bold; }
    .container { padding: 20px; }
    input, select { padding: 8px; margin-right: 10px; }
    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    th, td { border: 1px solid #ddd; padding: 8px; cursor: pointer; }
    th { background: #e5e7eb; }
    .status-active { background: #dcfce7; color: #166534; font-weight: bold; }
    .status-inactive { background: #fee2e2; color: #991b1b; font-weight: bold; }
    .pagination button { margin: 3px; padding: 6px 10px; }
  </style>
</head>
<body>
<header>
  <h1>Data BWA WiBAS</h1>
</header>
<nav>
  <a href="index.html">Profil</a>
  <a href="data.html">Data</a>
</nav>
<div class="container">
  <input type="text" id="search" placeholder="ðŸ” Search...">
  <select id="filterStatus">
    <option value="">Semua Status</option>
    <option value="Active">Active</option>
    <option value="In Active">In Active</option>
  </select>

  <table id="table"></table>
  <div class="pagination" id="pagination"></div>
</div>
<footer>Â© 2026 BWA WiBAS</footer>

<script>
const csvFile = 'data.csv';
const rowsPerPage = 50;
let data = [], filtered = [], page = 1, sortKey = '', asc = true;

Papa.parse(csvFile, {
  download: true,
  header: true,
  complete: res => {
    data = res.data.filter(r => Object.values(r).some(v => v));
    filtered = data;
    render();
  }
});

search.oninput = filter;
filterStatus.onchange = filter;

function filter() {
  const q = search.value.toLowerCase();
  const s = filterStatus.value;
  filtered = data.filter(r =>
    Object.values(r).some(v => String(v).toLowerCase().includes(q)) &&
    (!s || r.Status === s)
  );
  page = 1;
  render();
}

function render() {
  const table = document.getElementById('table');
  table.innerHTML = '';
  if (!filtered.length) return;

  const headers = Object.keys(filtered[0]);
  table.innerHTML += '<tr>' + headers.map(h => `<th onclick="sortBy('${h}')">${h}</th>`).join('') + '</tr>';

  filtered.slice((page-1)*rowsPerPage, page*rowsPerPage).forEach(r => {
    let tr = '<tr>';
    headers.forEach(h => {
      let cls = '';
      if (h.toLowerCase().includes('status')) {
        cls = r[h] === 'Active' ? 'status-active' : 'status-inactive';
      }
      tr += `<td class="${cls}">${r[h]||''}</td>`;
    });
    tr += '</tr>';
    table.innerHTML += tr;
  });

  pagination.innerHTML = '';
  const pages = Math.ceil(filtered.length / rowsPerPage);
  for (let i=1;i<=pages;i++) pagination.innerHTML += `<button onclick="page=${i};render()">${i}</button>`;
}

function sortBy(k) {
  asc = sortKey === k ? !asc : true;
  sortKey = k;
  filtered.sort((a,b)=> asc ? a[k].localeCompare(b[k]) : b[k].localeCompare(a[k]));
  render();
}
</script>
</body>
</html>
